<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="noindex">
  <title>用木大3Dモデルビューワー</title>
  <meta property="og:title" content="用木大3Dモデルビューワー">
  <meta property="og:description" content="用木大の3Dモデルをブラウザで閲覧できます">
  <meta property="og:image" content="https://boxed-mikann.github.io/showcase-3yd/thumbnail.png">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    body { 
      margin: 0;
      padding: 1em;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      box-sizing: border-box;
    }
    h1 {
      margin: 0.5em 0;
    }
    model-viewer { 
      width: 90vw;
      max-width: 1200px;
      height: 70vh;
      min-height: 400px;
      margin: 1em auto;
    }
    p {
      margin: 0.5em 0;
    }
    .model-selector {
      margin: 1em 0;
      display: flex;
      gap: 1em;
      flex-wrap: wrap;
      justify-content: center;
    }
    .model-selector label {
      cursor: pointer;
    }
    .controls {
      display: flex;
      gap: 1em;
      align-items: center;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 0.5em;
    }
    .brightness-control {
      display: flex;
      gap: 0.5em;
      align-items: center;
    }
    .brightness-control input[type="range"] {
      width: 200px;
    }
    @media (max-width: 768px) {
      model-viewer {
        width: 95vw;
        height: 60vh;
        min-height: 300px;
      }
      .brightness-control input[type="range"] {
        width: 140px;
      }
    }
  </style>
</head>
<body>
  <h1>用木大3Dモデル</h1>
  <div class="model-selector">
    <label><input type="radio" name="model" value="youbokudai.glb"> モデル1</label>
    <label><input type="radio" name="model" value="youbokudai2.glb"> 2観客壁絵</label>
    <label><input type="radio" name="model" value="youbokudai3.glb"> 3壁ボード</label>
    <label><input type="radio" name="model" value="youbokudai4.glb"> 4ビールケース</label>
    <!-- <label><input type="radio" name="model" value="youbokudai5.glb"> 5赤髪壁絵/label> -->
    <label><input type="radio" name="model" value="youbokudai6.glb"> 5赤髪壁絵</label>
    <label><input type="radio" name="model" value="youbokudai7.glb"> 6白黒壁絵</label>
    <label><input type="radio" name="model" value="youbokudai8.glb" checked> 7黒地壁絵</label>
    <label><input type="radio" name="model" value="youbokudai9.glb" > 西屋台イメージ</label>
  </div>

  <div class="controls">
    <div class="model-selector">
      <label><input type="checkbox" id="auto-rotate-toggle"> 自動回転</label>
    </div>

    <div class="brightness-control" title="背景の明るさを調整します">
      <label for="brightness-range">背景の明るさ</label>
      <input id="brightness-range" type="range" min="0" max="100" value="100" step="1" aria-label="背景の明るさ">
      <span id="brightness-value">100%</span>
    </div>
  </div>

  <model-viewer src="youbokudai8.glb" camera-controls background-color="#fff"></model-viewer>
  <p>マウスで回転・拡大縮小できます</p>
  <script>
    const viewer = document.querySelector('model-viewer');

    // Model radio buttons
    document.querySelectorAll('input[name="model"]').forEach(radio => {
      radio.addEventListener('change', e => {
        viewer.setAttribute('src', e.target.value);
      });
    });

    // Auto-rotate toggle
    const autoRotateToggle = document.getElementById('auto-rotate-toggle');
    autoRotateToggle.addEventListener('change', e => {
      if (e.target.checked) {
        viewer.setAttribute('auto-rotate', '');
      } else {
        viewer.removeAttribute('auto-rotate');
      }
    });

    // Brightness slider: converts 0-100% to a grayscale hex (#000..#fff)
    const brightnessRange = document.getElementById('brightness-range');
    const brightnessValueLabel = document.getElementById('brightness-value');

    function brightnessToHex(percent) {
      // percent: 0..100 -> 0..255
      const v = Math.round(Math.max(0, Math.min(100, percent)) * 2.55);
      const hex = v.toString(16).padStart(2, '0');
      return `#${hex}${hex}${hex}`;
    }

    function applyBrightness(percent) {
      const hex = brightnessToHex(percent);
      // model-viewer accepts background-color attribute
      viewer.setAttribute('background-color', hex);
      // update visible label
      brightnessValueLabel.textContent = `${percent}%`;
    }

    // Initialize from default value (100%)
    applyBrightness(parseInt(brightnessRange.value, 10));

    brightnessRange.addEventListener('input', (e) => {
      applyBrightness(e.target.value);
    });
  </script>
</body>
</html>
